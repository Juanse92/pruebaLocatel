{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jsbt_/OneDrive/Escritorio/Prueba Locatel/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { Authentication } from 'src/app/entities/authentication';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/usuario.service\";\nimport * as i2 from \"src/app/service/cuenta.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"primeng/button\";\nexport class IngresarLogoutComponent {\n  constructor(usuarioService, cuentaService, router, fb) {\n    this.usuarioService = usuarioService;\n    this.cuentaService = cuentaService;\n    this.router = router;\n    this.FlagInOut = new EventEmitter();\n    this.formLogin = fb.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n  }\n\n  ngOnInit() {}\n\n  registro() {\n    this.FlagInOut.emit('registrar');\n  }\n\n  login() {\n    var _this = this;\n\n    let auth = new Authentication();\n    auth.username = this.formLogin.value['username'].toString();\n    auth.password = this.formLogin.value['password'].toString();\n    this.usuarioService.authentication(auth).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (response) {\n        let idUser = 0;\n        yield _this.usuarioService.getCuenta_username(auth.username).then(resp => {\n          idUser = resp.id;\n        }).catch(er => {\n          console.log(er);\n        });\n        let sessionService = {\n          idUser: idUser,\n          username: auth.username,\n          token: response.token\n        };\n        localStorage.setItem('sessionService', JSON.stringify(sessionService));\n\n        _this.router.navigate(['/locatel/consultarLogin']);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n\n}\n\nIngresarLogoutComponent.ɵfac = function IngresarLogoutComponent_Factory(t) {\n  return new (t || IngresarLogoutComponent)(i0.ɵɵdirectiveInject(i1.UsuarioService), i0.ɵɵdirectiveInject(i2.CuentaService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.FormBuilder));\n};\n\nIngresarLogoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: IngresarLogoutComponent,\n  selectors: [[\"app-ingresar-logout\"]],\n  outputs: {\n    FlagInOut: \"FlagInOut\"\n  },\n  decls: 21,\n  vars: 1,\n  consts: [[1, \"grid\", 2, \"padding-top\", \"95px\", \"height\", \"100%\"], [\"role\", \"form\", 3, \"formGroup\"], [1, \"col-12\"], [\"pInputText\", \"\", \"type\", \"text\", \"id\", \"asd\", \"type\", \"email\", \"formControlName\", \"username\"], [\"type\", \"password\", \"formControlName\", \"password\"], [\"pButton\", \"\", \"type\", \"button\", 1, \"button-round\", \"button-gray\", \"text-color-white\", 3, \"click\"]],\n  template: function IngresarLogoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"div\", 2)(3, \"span\");\n      i0.ɵɵtext(4, \"Usuario:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 2);\n      i0.ɵɵelement(6, \"input\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"br\");\n      i0.ɵɵelementStart(8, \"div\", 2)(9, \"span\");\n      i0.ɵɵtext(10, \"Contrase\\u00F1a:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 2);\n      i0.ɵɵelement(12, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"br\");\n      i0.ɵɵelementStart(14, \"div\")(15, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function IngresarLogoutComponent_Template_button_click_15_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(16, \"Ingresar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(17, \"br\");\n      i0.ɵɵelementStart(18, \"div\")(19, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function IngresarLogoutComponent_Template_button_click_19_listener() {\n        return ctx.registro();\n      });\n      i0.ɵɵtext(20, \"Registrar cuenta\");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.formLogin);\n    }\n  },\n  dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i5.ButtonDirective, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpbmdyZXNhci1sb2dvdXQuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"mappings":";AAAA,SAAoBA,YAApB,QAAwD,eAAxD;AACA,SAAiCC,UAAjC,QAAmD,gBAAnD;AAEA,SAASC,cAAT,QAA+B,iCAA/B;;;;;;;AASA,OAAM,MAAOC,uBAAP,CAA8B;EAKlCC,YACUC,cADV,EAEUC,aAFV,EAGUC,MAHV,EAIEC,EAJF,EAIgB;IAHN;IACA;IACA;IAPD,iBAAY,IAAIR,YAAJ,EAAZ;IAUP,KAAKS,SAAL,GAAiBD,EAAE,CAACE,KAAH,CAAS;MACxBC,QAAQ,EAAE,CAAC,EAAD,EAAKV,UAAU,CAACW,QAAhB,CADc;MAExBC,QAAQ,EAAE,CAAC,EAAD,EAAKZ,UAAU,CAACW,QAAhB;IAFc,CAAT,CAAjB;EAID;;EAEDE,QAAQ,IACP;;EACDC,QAAQ;IACN,KAAKC,SAAL,CAAeC,IAAf,CAAoB,WAApB;EACD;;EACDC,KAAK;IAAA;;IACH,IAAIC,IAAI,GAAC,IAAIjB,cAAJ,EAAT;IACAiB,IAAI,CAACR,QAAL,GAAc,KAAKF,SAAL,CAAeW,KAAf,CAAqB,UAArB,EAAiCC,QAAjC,EAAd;IACAF,IAAI,CAACN,QAAL,GAAc,KAAKJ,SAAL,CAAeW,KAAf,CAAqB,UAArB,EAAiCC,QAAjC,EAAd;IACE,KAAKhB,cAAL,CAAoBiB,cAApB,CAAmCH,IAAnC,EAAyCI,IAAzC;MAAA,6BAA8C,WAAOC,QAAP,EAAuB;QACnE,IAAIC,MAAM,GAAC,CAAX;QACA,MAAM,KAAI,CAACpB,cAAL,CAAoBqB,kBAApB,CAAuCP,IAAI,CAACR,QAA5C,EAAsDY,IAAtD,CAA4DI,IAAD,IAAY;UAACF,MAAM,GAACE,IAAI,CAACC,EAAZ;QAAe,CAAvF,EACLC,KADK,CACCC,EAAE,IAAE;UAACC,OAAO,CAACC,GAAR,CAAYF,EAAZ;QAAgB,CADtB,CAAN;QAGA,IAAIG,cAAc,GAAC;UAACR,MAAM,EAACA,MAAR;UAAed,QAAQ,EAACQ,IAAI,CAACR,QAA7B;UAAsCuB,KAAK,EAACV,QAAQ,CAACU;QAArD,CAAnB;QACAC,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCC,IAAI,CAACC,SAAL,CAAeL,cAAf,CAAvC;;QACA,KAAI,CAAC1B,MAAL,CAAYgC,QAAZ,CAAqB,CAAC,yBAAD,CAArB;MACD,CARD;;MAAA;QAAA;MAAA;IAAA;EASH;;AAnCiC;;;mBAAvBpC,yBAAuBqC;AAAA;;;QAAvBrC;EAAuBsC;EAAAC;IAAA1B;EAAA;EAAA2B;EAAAC;EAAAC;EAAAC;IAAA;MCZpCN,+BAA2D,CAA3D,EAA2D,MAA3D,EAA2D,CAA3D,EAA2D,CAA3D,EAA2D,KAA3D,EAA2D,CAA3D,EAA2D,CAA3D,EAA2D,MAA3D;MAGkBA;MAAQA;MAElBA;MACIA;MACJA;MAEAA;MACAA,+BAAoB,CAApB,EAAoB,MAApB;MACUA;MAAWA;MAErBA;MACIA;MACJA;MACAA;MACAA,6BAAK,EAAL,EAAK,QAAL,EAAK,CAAL;MAEsBA;QAAA,OAASO,WAAT;MAAgB,CAAhB;MAAkBP;MAAQA;MAEhDA;MACAA,6BAAK,EAAL,EAAK,QAAL,EAAK,CAAL;MAEsBA;QAAA,OAASO,cAAT;MAAmB,CAAnB;MAAqBP;MAAgBA;;;;MAvBzDA;MAAAA","names":["EventEmitter","Validators","Authentication","IngresarLogoutComponent","constructor","usuarioService","cuentaService","router","fb","formLogin","group","username","required","password","ngOnInit","registro","FlagInOut","emit","login","auth","value","toString","authentication","then","response","idUser","getCuenta_username","resp","id","catch","er","console","log","sessionService","token","localStorage","setItem","JSON","stringify","navigate","i0","selectors","outputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\jsbt_\\OneDrive\\Escritorio\\Prueba Locatel\\front\\src\\app\\pages\\ingresar-logout\\ingresar-logout.component.ts","C:\\Users\\jsbt_\\OneDrive\\Escritorio\\Prueba Locatel\\front\\src\\app\\pages\\ingresar-logout\\ingresar-logout.component.html"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Authentication } from 'src/app/entities/authentication';\nimport { CuentaService } from 'src/app/service/cuenta.service';\nimport { UsuarioService } from 'src/app/service/usuario.service';\n\n@Component({\n  selector: 'app-ingresar-logout',\n  templateUrl: './ingresar-logout.component.html',\n  styleUrls: ['./ingresar-logout.component.scss']\n})\nexport class IngresarLogoutComponent implements OnInit {\n  @Output()FlagInOut = new EventEmitter<string>();\n\n  formLogin: FormGroup;\n\n  constructor(\n    private usuarioService: UsuarioService,\n    private cuentaService:CuentaService,\n    private router: Router,\n    fb:FormBuilder\n  ) { \n    this.formLogin = fb.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required]\n    });\n  }\n\n  ngOnInit(): void {\n  }\n  registro(){\n    this.FlagInOut.emit('registrar');\n  }\n  login(){\n    let auth=new Authentication()\n    auth.username=this.formLogin.value['username'].toString()\n    auth.password=this.formLogin.value['password'].toString()\n      this.usuarioService.authentication(auth).then(async (response:any) => {\n        let idUser=0\n        await this.usuarioService.getCuenta_username(auth.username).then((resp:any)=>{idUser=resp.id})\n        .catch(er=>{console.log(er)})\n\n        let sessionService={idUser:idUser,username:auth.username,token:response.token}\n        localStorage.setItem('sessionService', JSON.stringify(sessionService))\n        this.router.navigate(['/locatel/consultarLogin']);\n      })\n  }\n}\n","<div style=\"padding-top: 95px; height: 100%;\" class=\"grid\">\n    <form [formGroup]=\"formLogin\" role=\"form\">\n        <div class=\"col-12\">\n            <span>Usuario:</span>\n        </div>\n        <div class=\"col-12\">\n            <input pInputText type=\"text\" id=\"asd\" type=\"email\" formControlName=\"username\">\n        </div>\n\n        <br>\n        <div class=\"col-12\">\n            <span>Contraseña:</span>\n        </div>\n        <div class=\"col-12\">\n            <input type=\"password\" formControlName=\"password\">\n        </div>\n        <br>\n        <div>\n            <button pButton class=\"button-round button-gray text-color-white\" \n                type=\"button\" (click)=\"login()\">Ingresar</button>\n        </div>\n        <br>\n        <div>\n            <button pButton class=\"button-round button-gray text-color-white\" \n                type=\"button\" (click)=\"registro()\">Registrar cuenta</button>\n        </div>\n    </form>\n</div>"]},"metadata":{},"sourceType":"module"}